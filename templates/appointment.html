{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %}Qabulga Yozilish - DentCare{% endblock %}
{% block body_class %}appointment-page{% endblock %}
{% block heading_title %}Qabulga Yozilish{% endblock %}
{% block heading_desc %}Onlayn qabulga yozilish tizimi orqali qulay vaqtni tanlang va professional stomatologiya xizmatidan bahramand bo'ling{% endblock %}
{% block breadcrumb %}Qabulga Yozilish{% endblock %}

{% block content %}

    <!-- Appointment Section -->
    <section id="appointment" class="appointment section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <!-- Appointment Info -->
          <div class="col-lg-6">
            <div class="appointment-info">
              <h3>Tez va Oson Onlayn Qabulga Yozilish</h3>
              <p class="mb-4">Qabulga yozilish uchun bir necha bosqichni to'ldiring. Bizning professional tish shifokorlarimiz sizga eng yaxshi xizmatni ko'rsatishga tayyor.</p>

              <div class="info-items">
                <div class="info-item d-flex align-items-center mb-3" data-aos="fade-up" data-aos-delay="200">
                  <div class="icon-wrapper me-3">
                    <i class="bi bi-calendar-check"></i>
                  </div>
                  <div>
                    <h5>Moslashuvchan Jadval</h5>
                    <p class="mb-0">Band jadvlingizga mos keladigan qulay vaqtni tanlang</p>
                  </div>
                </div>

                <div class="info-item d-flex align-items-center mb-3" data-aos="fade-up" data-aos-delay="250">
                  <div class="icon-wrapper me-3">
                    <i class="bi bi-stopwatch"></i>
                  </div>
                  <div>
                    <h5>Tezkor Javob</h5>
                    <p class="mb-0">Arizangizni yuborgan 15 daqiqada tasdiqlash xabarini oling</p>
                  </div>
                </div>

                <div class="info-item d-flex align-items-center mb-3" data-aos="fade-up" data-aos-delay="300">
                  <div class="icon-wrapper me-3">
                    <i class="bi bi-shield-check"></i>
                  </div>
                  <div>
                    <h5>Professional Davolash</h5>
                    <p class="mb-0">Yuqori malakali va sertifikatlangan tish shifokorlari xizmatingizda</p>
                  </div>
                </div>
                <div class="container mt-3">
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}success{% endif %} alert-dismissible fade show" role="alert">
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
              </div>

              <div class="emergency-contact mt-4" data-aos="fade-up" data-aos-delay="350">
                <div class="emergency-card p-3">
                  <h6 class="mb-2"><i class="bi bi-telephone-fill me-2"></i>Tez Yordam Telefoni</h6>
                  <p class="mb-0">Shoshilinch stomatologik yordam uchun <strong>+998 71 123 45 67</strong> raqamiga qo'ng'iroq qiling</p>
                </div>
              </div>

            </div>
          </div><!-- End Appointment Info -->

          <!-- Appointment Form -->
          <div class="col-lg-6">
            <div class="appointment-form-wrapper" data-aos="fade-up" data-aos-delay="200">
              <form action="{% url 'appointment' %}" method="post" role="form">
                {% csrf_token %}

                {% if messages %}
                  <div class="messages-container mt-2">
                    {% for message in messages %}
                      <div class="alert alert-{% if message.tags == 'error' %}danger{% elif message.tags == 'success' %}success{% else %}info{% endif %} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                      </div>
                    {% endfor %}
                  </div>
                {% endif %}

                {% if form.non_field_errors %}
                  <div class="alert alert-danger">
                    {% for error in form.non_field_errors %}
                      {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

                <div class="row">
                  <div class="col-md-4 form-group mt-3">
                    {{ form.name.label_tag }}
                    {{ form.name }}
                    <div class="text-danger small">{{ form.name.errors }}</div>
                  </div>
                  <div class="col-md-4 form-group mt-3">
                    {{ form.phone.label_tag }}
                    {{ form.phone }}
                    <div class="text-danger small">{{ form.phone.errors }}</div>
                  </div>
                  <div class="col-md-4 form-group mt-3">
                    {{ form.department.label_tag }}
                    {{ form.department }}
                    <div class="text-danger small">{{ form.department.errors }}</div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4 form-group mt-3">
                    {{ form.doctor.label_tag }}
                    {{ form.doctor }}
                    <div class="text-danger small">{{ form.doctor.errors }}</div>
                  </div>
                  <div class="col-md-4 form-group mt-3">
                    {{ form.appointment_date.label_tag }}
                    {{ form.appointment_date }}
                    <div class="text-danger small">{{ form.appointment_date.errors }}</div>
                  </div>
                  <div class="col-md-4 form-group mt-3">
                    {{ form.appointment_time.label_tag }}
                    {{ form.appointment_time }}
                    <div class="text-danger small">{{ form.appointment_time.errors }}</div>
                  </div>
                </div>

                <div class="form-group mt-3">
                  {{ form.message.label_tag }}
                  {{ form.message }}
                  <div class="text-danger small">{{ form.message.errors }}</div>
                </div>

                <div class="text-center mt-4">
                  <button type="submit" class="appointment-btn">Qabulga Yozilish</button>
                </div>

              </form>
            </div>
          </div>
        </div>

        <!-- Process Steps -->
        <div class="process-steps mt-5" data-aos="fade-up" data-aos-delay="300">
          <div class="row text-center gy-4">
            <div class="col-lg-3 col-md-6">
              <div class="step-item">
                <div class="step-number">1</div>
                <div class="step-icon">
                  <i class="bi bi-person-fill"></i>
                </div>
                <h5>Ma'lumotlarni To'ldirish</h5>
                <p>Shaxsiy ma'lumotlaringizni kiriting va kerakli bo'limni tanlang</p>
              </div>
            </div>

            <div class="col-lg-3 col-md-6">
              <div class="step-item">
                <div class="step-number">2</div>
                <div class="step-icon">
                  <i class="bi bi-calendar-event"></i>
                </div>
                <h5>Sana va Vaqt Tanlash</h5>
                <p>Bo'sh vaqtlar ichidan sizga qulay sanani tanlang</p>
              </div>
            </div>

            <div class="col-lg-3 col-md-6">
              <div class="step-item">
                <div class="step-number">3</div>
                <div class="step-icon">
                  <i class="bi bi-check-circle"></i>
                </div>
                <h5>Tasdiqlash</h5>
                <p>Email yoki SMS orqali tasdiqlash xabarini oling</p>
              </div>
            </div>

            <div class="col-lg-3 col-md-6">
              <div class="step-item">
                <div class="step-number">4</div>
                <div class="step-icon">
                  <i class="bi bi-heart-pulse"></i>
                </div>
                <h5>Davolash</h5>
                <p>Belgilangan vaqtda klinikaga tashrif buyuring va sifatli xizmat oling</p>
              </div>
            </div>

          </div>
        </div><!-- End Process Steps -->

      </div>

    </section><!-- /Appointment Section -->

    <script src="{% static 'assets/js/appointment-ajax.js' %}"></script>

{% endblock %}